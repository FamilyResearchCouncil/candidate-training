version: '3.8'
services:
    app:
        env_file: ".env.${BRANCH_NAME_SLUG}"
        user: '1100'
        labels:
            traefik.enable: 'true'
            traefik.http.routers.candidate-training-staging.rule: Host(`staging.candidate-training.frc.org`)
            traefik.docker.network: "${TRAEFIK_NETWORK}"
        networks:
            - $TRAEFIK_NETWORK
            - default

    mysql:
        env_file: ".env.${BRANCH_NAME_SLUG}"

networks:
    $TRAEFIK_NETWORK:
        external: true